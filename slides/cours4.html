---
layout: presentation
title: Cours4
---
# Outils de Traitement de Corpus
cours 3
-vertical-

# Rappel du cours précédent

<h2 class="r-fit-text">📦Stocker des données📦</h2>
<h2 class="r-fit-text">🔄Charger les données dans python🔄</h2>

-vertical-

# Cours 4

<h2 class="r-fit-text">🔄Structurer les données - part 2🔄</h2>
<h2 class="r-fit-text">🎲Statistiques de corpus🎲</h2>
<h2 class="r-fit-text">👓Visualiser les données👓</h2>

-horizontal-

<h2 class="r-fit-text">🔄Structurer les données - part 2🔄</h2>

On a pu charger nos données dans python.

Mais on a parlé de bases de données.

-vertical-

### Petit rappel sur les BdD


Les bases de données permettent de stocker de larges quantités de données de façon optimisé. Elles sont constituées de tables qui sont reliées entre elles par des clés.

<img src="https://i.stack.imgur.com/dSnpA.png">

-vertical-

### Petit rappel sur les BdD

Chaque élément d'une table doit être identifiable de façon unique : les *clés primaires*

Chaque élément d'une table peut être relié à des éléments d'autres tables par leurs identifants unique : les *clés étrangères*

En indexant les données, on peut encore améliorer cette performance pour le stockage et la recherche.

-vertical-

### Petit rappel sur les BdD

Elles sont administrées par des actions *axiomatiques* qui sont partagé par tous les systèmes de bases de données.

- La *définition*
```
CREATE TABLE nom_de_la_table
(
    id INT PRIMARY KEY NOT NULL,
    colonne1 VARCHAR(500)
);
```

-vertical-

### Petit rappel sur les BdD

- Les opération de *modification*
```
INSERT INTO nom_de_la_table
VALUES
(1, "1 valeur de la table"),
(2, "2 valeur de la table");
```

-vertical-

### Petit rappel sur les BdD

- Les *recherches*

```
SELECT * FROM nom_de_la_table
```

-vertical-

### Petit rappel sur les BdD

- Le *partage/administration*

&rarr; gérer les utilisateurs, les données, etc...

-vertical-

Le plus important reste le language de requête :

Il faut savoir naviguer entre les différentes tables en utilisant les identifiants des objets qu'elles contiennent

-vertical-

<aside class="notes">
schema creation

-> il ya un certain nombre d'actions qui sont limitées

SQL

clé primaire - clé etrangère



les bases de données (DB) les plus utilisées sont les bases de données relationnelles (cf. Cours de SQL).
Elles utilisent un Relational Database Management System (RDBMS) pour stocker les données et peuvent
être requêtées grâce à SQL.


Les différents RDBMS sont implémentés pour différents usages:

```
PostGre vs. SQLite
```

</aside>

Les DB sont souvent stockées sur des serveurs distants auquels il faut accéder avec un protocole de communication
sécurisé (type ssh [secure shell protocol])

&rarr; On peut s'entraîner à gérer ce genre de choses grâce à des machines virtuelles ou des dockers !
&rarr; On va faire ça dans la première partie TP d'aujourd'hui

-horizontal-

<h2 class="r-fit-text">🎲Statistiques de corpus🎲</h2>

Lorsqu'on collecte de grandes quantités de données, il peut être difficile d'évaluer leur qualité en un coup d'oeil.

On va donc passer par des représentations de leurs caractéristiques pour estimer leur qualité.

-vertical-

Chaque tâche dispose de statistiques pour évualer la qualité des données récupérées.

-vertical-

Les caractéristiques que l'on va observer peuvent être :

- qualitatives
    - les termes contenus dans nos textes
- quantitatives
    - la quantité de données contenue dans notre corpus

-vertical-

Avec ces observations, on va également pouvoir observer si on a des items qui ne correspondent pas à ce que l'on voulait récupérer

>*par exemple :*
Lorsqu'on récupère des articles de presse, certains sont libres de droits et d'autres sont tronqués après quelques lignes d'informations
&rarr; visualiser la taille des textes et des résumés va nous permettre d'éliminer les élèments non pertinents.

-vertical-

### Quelques exemples de caractéristiques à exploiter :

**Pour le résumé automatique**

- La taille des textes
- la taille des résumés
- le ratio de compression (taille des résumés/taille des textes)

-vertical-

### Quelques exemples de caractéristiques à exploiter :

**Pour la transcription**

- la longueur des audio
- la taille des transcriptions
- le ratio de compression des transcriptions/audio

-vertical-

### Quelques exemples de caractéristiques à exploiter :

**Pour la traduction**

- Le ratio de type entre le texte source et cible
- Le ratio de longueur

-vertical-

### Quelques exemples de caractéristiques à exploiter :

Ces caractéristiques sont présentées dans les papiers qui présentent les corpus pour une tâche données

&rarr; Quelles sont les statistiques pour votre tâche ?

-horizontal-

<h2 class="r-fit-text">👓Visualiser les données👓</h2>


-vertical-

La visualisation permet de :

- *mieux appréhender* les *données et leur structure*
- pouvoir faire des *comparaisons* avec d’autres données
- vulgariser/communiquer avec des non-experts
- résoudre un problème
- pouvoir acquérir de nouvelles connaissances

-vertical-

## Le Quartet d'Anscombe

<div class="r-stack">
    <div>
        <img src="/OutilsTraitementCorpus/slides/img/tableauQuartetAnscombe.png">
        <img src="/OutilsTraitementCorpus/slides/img/tableauQuartetAnscombe_tableauvaleur.png">
    </div>
    <div>
        <img class="fragment" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Anscombe.svg/langfr-1920px-Anscombe.svg.png">
    </div>
</div>

-vertical-

La perception humaine est limitée.

<div class="r-stretch">
        <img src="https://www.popsci.com/uploads/2019/03/18/HJRGWPU4SINA2B6WK5PJ2UBF4M.jpg?auto=webp&optimize=high&width=1440">
        <img class="fragment" src="https://www.popsci.com/uploads/2019/03/18/6QRQCXL4ZJSFJG4NXTX7RBODOU.jpg?auto=webp&optimize=high&width=800">
</div>

-vertical-

On est bon pour reconnaitre les formes et les ordres de grandeurs

<img class ="r-stretch" src="https://static.boredpanda.com/blog/wp-content/uploads/2020/09/1291509085855260672-png__700.jpg">

-vertical-

Pourquoi faire de la visualisation ?

- Faire de la visualisation =

Choisir une représentation pour résoudre un problème

- Une représentation c’est :
- Des métriques (qu’est-ce que l’on veut représenter ?)
- Une échelle (comment voir le mieux les données ?)
- Une projection (comment choisir les variables de représentation ?)

-vertical-

Un cinéma vend des places pour 5€. Il propose aussi un abonnement à 50€, le prix de la place passe alors à 3€. 

À partir de combien de place faut-il prendre un abonnement ?

2 représentations possibles :

<img class="fragment" src="/OutilsTraitementCorpus/slides/img/Reprequation.png">

-vertical-

### Une représentation : choix de l’échelle

Comment voir le mieux les données ?

On va utiliser différentes variables de représentation :

Position, taille, forme, saturation, couleur, etc.

-vertical-

Pour mieux comprendre on va mesurer les caractéristiques visuelles des variables de représentation :

*Sélectivité* : à quel point il est facile de différencier/d’isoler des groupes différents ?

*Associativité* : à quel point il est facile de créer des groupes ?

*Ordonnabilité* : à quel point arrive t-on à percevoir un ordre dans les données ?

*Quantifiabilité* : à quel point arrive t-on à obtenir des valeurs numériques à partir de notre représentation ?

*Variabilité* : à quel point arrive t-on créer des variantes et toujours réussir à percevoir les changements dans notre représentation ?

-vertical-

<img src="/OutilsTraitementCorpus/slides/img/position_slide.png">

-vertical-

<img src="/OutilsTraitementCorpus/slides/img/taille_slide.png">


-vertical-

<img src="/OutilsTraitementCorpus/slides/img/forme_slide.png">

-vertical-

### Quelle représentation donne le plus d'information et pourquoi ?

<div class="r-stretch">
<img src="https://www.researchgate.net/publication/284173352/figure/fig1/AS:298122837282824@1448089431764/Research-and-development-budgets-in-2011-by-country-Size-of-circles-indicate-the.png">
<img src="https://sciencebusiness.net/sites/default/files/inline-images/nb0704_1050.jpg">
</div>

-vertical-

Des bibliothèques spécifiques existent pour la représentation des données dont les plus connues sont :

- Matplotlib
- Seaborn

-vertical-

Un notebook Matplot/seaborn

-vertical-

Utiliser pandas pour visualiser les données

-horizontal-

❓ Des questions ❓

💡 Des idées 💡

-vertical-

## Le point bonne pratique

**Commenter son code &rarr; les [docstrings](https://peps.python.org/pep-0257/#what-is-a-docstring)**

> "Code is read much more often than it is written." Guido

-vertical-

1. Les docstrings de module
Au début un fichier `.py`, on explique à quoi il sert et qu'est ce qu'il contient
```
"""Spreadsheet Column Printer

This script allows the user to print to the console all columns in the
spreadsheet. It is assumed that the first row of the spreadsheet is the
location of the columns.

This tool accepts comma separated value files (.csv) as well as excel
(.xls, .xlsx) files.

This script requires that `pandas` be installed within the Python
environment you are running this script in.

This file can also be imported as a module and contains the following
functions:

    * get_spreadsheet_cols - returns the column headers of the file
    * main - the main function of the script
"""
```

-vertical-

2. Les docstrings de fonction
```
"""Gets and prints the spreadsheet's header columns

Parameters
----------
file_loc : str
    The file location of the spreadsheet
print_cols : bool, optional
    A flag used to print the columns to the console (default is
    False)

Returns
-------
list
    a list of strings used that are the header columns
"""
```

-vertical-

3. Les docstrings de Classe
```
"""
A class used to represent an Animal

Attributes
----------
says_str : str
    a formatted string to print out what the animal says
...
num_legs : int
    the number of legs the animal has (default 4)

Methods
-------
says(sound=None)
    Prints the animals name and what sound it makes
"""
```

-horizontal-

## TP 1 - Se connecter en ssh à un serveur distant

### Permière partie mettre en place un "faux" serveur grâce à docker

1. Installer [docker](https://docs.docker.com/desktop/install/linux-install/) sur votre machine

-vertical-

1. Choix du système : Alpine ou Ubuntu

2. Installer openssh pour pouvoir se connecter au docker

3. Installer python sqlite3 bash py3-pip

-vertical-

```
FROM alpine:latest

RUN apk update && apk add bash
RUN apk add --update --no-cache openssh\
 sqlite\
 python3\
 py3-pip
```

-vertical-

RUN adduser -h /home/user -s /bin/sh -D user

-vertical-

## Les différents types de connection ssh

1. configuration par mot de passe

2. configuration par clé

-vertical-

```
RUN echo "PasswordAuthentication yes" >> /etc/ssh/sshd_config
RUN echo -n "user:defaultpassword" | chpasswd
ENTRYPOINT ["/entrypoint.sh"]
```

-vertical-

1. exposer son conteneur sur un port

```
EXPOSE 22
COPY entrypoint.sh /
```

-vertical-

<h3 class="r-fit-text">Rappel sur la différence entre docker et machine virtuelle</h3>

<img src="https://www.sdxcentral.com/wp-content/uploads/2019/05/ContainersvsVMs_Image.jpg">

-vertical-

<h3 class="r-fit-text">Construire son docker</h3>

1. build le docker avec la commande 
```
sudo docker build -t alpine-sshd .
```

-vertical-

When a container runs, it uses the various layers from an image for its filesystem. Each container also gets its own "scratch space" to create/update/remove files. Any changes won't be seen in another container, even if they're using the same image.

-vertical-

2. créer un volume persitant 
```
sudo docker volume create mock-db
```

-vertical-

3. run le docker en montant le volume persitant

```
sudo docker run -d -p 127.0.0.1:22:22 --mount type=volume,src=mock-db,target=/ alpine-sshd:latest
```

-vertical-
6. se connecter en ssh sur le port 22

```
ssh user@127.0.0.1
```

-vertical-

<h3 class="r-fit-text">Créer sa base de données</h3>

On peut directement insérer nos dataframe `pandas` comme des tables sql grâce à la méthode de conversion `to_sql`

```
import sqlite3
con = sqlite3.connect("tutorial.db")
dataset.to_sql(con)
``̀ 

-horizontal-

### TP 2 - Trouver les statistiques adaptées à son corpus

À partir du corpus de référence que vous avez choisi

- Trouvez les statistiques qui ont été effectuées pour prouver la qualité du corpus
- Les implémenter et les calculer pour votre corpus
- Est-ce que le calcul est couteux ?
    - si oui, stocker les résultats dans votre structure de données
    - si non, faire une méthode pour pouvoir facilement appliquer le calcul sur vos données.

-horizontal-

### TP 3 - Visualiser les statistiques de corpus

1. Visualiser votre corpus à partir de statistiques de textes

    a. longueur des textes

    b. mots fréquents (zipf)

    c. les statistiques adaptées à votre tâche