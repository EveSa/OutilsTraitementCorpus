---
layout: presentation
title: Cours4
---
# Outils de Traitement de Corpus
cours 3
-vertical-

# Rappel du cours prÃ©cÃ©dent

<h2 class="r-fit-text">ğŸ“¦Stocker des donnÃ©esğŸ“¦</h2>
<h2 class="r-fit-text">ğŸ”„Charger les donnÃ©es dans pythonğŸ”„</h2>

-vertical-

# Cours 4

<h2 class="r-fit-text">ğŸ”„Structurer les donnÃ©es - part 2ğŸ”„</h2>
<h2 class="r-fit-text">ğŸ²Statistiques de corpusğŸ²</h2>
<h2 class="r-fit-text">ğŸ‘“Visualiser les donnÃ©esğŸ‘“</h2>

-horizontal-

<h2 class="r-fit-text">ğŸ”„Structurer les donnÃ©es - part 2ğŸ”„</h2>

On a pu charger nos donnÃ©es dans python.

Mais on a parlÃ© de bases de donnÃ©es.

-vertical-

### Petit rappel sur les BdD


Les bases de donnÃ©es permettent de stocker de larges quantitÃ©s de donnÃ©es de faÃ§on optimisÃ©. Elles sont constituÃ©es de tables qui sont reliÃ©es entre elles par des clÃ©s.

<img src="https://i.stack.imgur.com/dSnpA.png">

-vertical-

### Petit rappel sur les BdD

Chaque Ã©lÃ©ment d'une table doit Ãªtre identifiable de faÃ§on unique : les *clÃ©s primaires*

Chaque Ã©lÃ©ment d'une table peut Ãªtre reliÃ© Ã  des Ã©lÃ©ments d'autres tables par leurs identifants unique : les *clÃ©s Ã©trangÃ¨res*

En indexant les donnÃ©es, on peut encore amÃ©liorer cette performance pour le stockage et la recherche.

-vertical-

### Petit rappel sur les BdD

Elles sont administrÃ©es par des actions *axiomatiques* qui sont partagÃ© par tous les systÃ¨mes de bases de donnÃ©es.

- La *dÃ©finition*
```
CREATE TABLE nom_de_la_table
(
    id INT PRIMARY KEY NOT NULL,
    colonne1 VARCHAR(500)
);
```

-vertical-

### Petit rappel sur les BdD

- Les opÃ©ration de *modification*
```
INSERT INTO nom_de_la_table
VALUES
(1, "1 valeur de la table"),
(2, "2 valeur de la table");
```

-vertical-

### Petit rappel sur les BdD

- Les *recherches*

``Ì€`
SELECT * FROM nom_de_la_table
```

-vertical-

### Petit rappel sur les BdD

- Le *partage/administration*

&rarr; gÃ©rer les utilisateurs, les donnÃ©es, etc...

-vertical-

Le plus important reste le language de requÃªte :

Il faut savoir naviguer entre les diffÃ©rentes tables en utilisant les identifiants des objets qu'elles contiennent

-vertical-

<aside class="notes">
schema creation

-> il ya un certain nombre d'actions qui sont limitÃ©es

SQL

clÃ© primaire - clÃ© etrangÃ¨re



les bases de donnÃ©es (DB) les plus utilisÃ©es sont les bases de donnÃ©es relationnelles (cf. Cours de SQL).
Elles utilisent un Relational Database Management System (RDBMS) pour stocker les donnÃ©es et peuvent
Ãªtre requÃªtÃ©es grÃ¢ce Ã  SQL.

-vertical-

Les diffÃ©rents RDBMS sont implÃ©mentÃ©s pour diffÃ©rents usages:

```
PostGre vs. SQLite
```

-vertical-
</aside>

Les DB sont souvent stockÃ©es sur des serveurs distants auquels il faut accÃ©der avec un protocole de communication
sÃ©curisÃ© (type ssh [secure shell protocol])

&rarr; On peut s'entraÃ®ner Ã  gÃ©rer ce genre de choses grÃ¢ce Ã  des machines virtuelles ou des dockers !
&rarr; On va faire Ã§a dans la premiÃ¨re partie TP d'aujourd'hui

-horizontal-

<h2 class="r-fit-text">ğŸ²Statistiques de corpusğŸ²</h2>

Lorsqu'on collecte de grandes quantitÃ©s de donnÃ©es, il peut Ãªtre difficile d'Ã©valuer leur qualitÃ© en un coup d'oeil.

On va donc passer par des reprÃ©sentations de leurs caractÃ©ristiques pour estimer leur qualitÃ©.

-vertical-

Chaque tÃ¢che dispose de statistiques pour Ã©vualer la qualitÃ© des donnÃ©es rÃ©cupÃ©rÃ©es.

-vertical-

Les caractÃ©ristiques que l'on va observer peuvent Ãªtre :

- qualitatives
    - les termes contenus dans nos textes
- quantitatives
    - la quantitÃ© de donnÃ©es contenue dans notre corpus

-vertical-

Avec ces observations, on va Ã©galement pouvoir observer si on a des items qui ne correspondent pas Ã  ce que l'on voulait rÃ©cupÃ©rer

>*par exemple :*
Lorsqu'on rÃ©cupÃ¨re des articles de presse, certains sont libres de droits et d'autres sont tronquÃ©s aprÃ¨s quelques lignes d'informations
&rarr; visualiser la taille des textes et des rÃ©sumÃ©s va nous permettre d'Ã©liminer les Ã©lÃ¨ments non pertinents.

-vertical-

### Quelques exemples de caractÃ©ristiques Ã  exploiter :

**Pour le rÃ©sumÃ© automatique**

- La taille des textes
- la taille des rÃ©sumÃ©s
- le ratio de compression (taille des rÃ©sumÃ©s/taille des textes)

-vertical-

### Quelques exemples de caractÃ©ristiques Ã  exploiter :

**Pour la transcription**

- la longueur des audio
- la taille des transcriptions
- le ratio de compression des transcriptions/audio

-vertical-

### Quelques exemples de caractÃ©ristiques Ã  exploiter :

**Pour la traduction**

- Le ratio de type entre le texte source et cible
- Le ratio de longueur

-vertical-

### Quelques exemples de caractÃ©ristiques Ã  exploiter :

Ces caractÃ©ristiques sont prÃ©sentÃ©es dans les papiers qui prÃ©sentent les corpus pour une tÃ¢che donnÃ©es

&rarr; Quelles sont les statistiques pour votre tÃ¢che ?

-horizontal-

<h2 class="r-fit-text">ğŸ‘“Visualiser les donnÃ©esğŸ‘“</h2>


-vertical-

La visualisation permet de :

- *mieux apprÃ©hender* les *donnÃ©es et leur structure*
- pouvoir faire des *comparaisons* avec dâ€™autres donnÃ©es
- vulgariser/communiquer avec des non-experts
- rÃ©soudre un problÃ¨me
- pouvoir acquÃ©rir de nouvelles connaissances

-vertical-

## Le Quartet d'Anscombe

<div class="r-stack">
    <div>
        <img src="/OutilsTraitementCorpus/slides/img/tableauQuartetAnscombe.png">
        <img src="/OutilsTraitementCorpus/slides/img/tableauQuartetAnscombe_tableauvaleur.png">
    </div>
    <div>
        <img class="fragment" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Anscombe.svg/langfr-1920px-Anscombe.svg.png">
    </div>
</div>

-vertical-

La perception humaine est limitÃ©e.

<div class="r-fit-text">
        <img src="https://www.popsci.com/uploads/2019/03/18/HJRGWPU4SINA2B6WK5PJ2UBF4M.jpg?auto=webp&optimize=high&width=1440">
        <img class="fragment" src="https://www.popsci.com/uploads/2019/03/18/6QRQCXL4ZJSFJG4NXTX7RBODOU.jpg?auto=webp&optimize=high&width=800">
</div>

-vertical-

On est bon pour reconnaitre les formes et les ordres de grandeurs

<img class ="r-stretch" src="https://static.boredpanda.com/blog/wp-content/uploads/2020/09/1291509085855260672-png__700.jpg">

-vertical-

Pourquoi faire de la visualisation ?

- Faire de la visualisation =

Choisir une reprÃ©sentation pour rÃ©soudre un problÃ¨me

- Une reprÃ©sentation câ€™est :
- Des mÃ©triques (quâ€™est-ce que lâ€™on veut reprÃ©senter ?)
- Une Ã©chelle (comment voir le mieux les donnÃ©es ?)
- Une projection (comment choisir les variables de reprÃ©sentation ?)

-vertical-

Un cinÃ©ma vend des places pour 5â‚¬. Il propose aussi un abonnement Ã  50â‚¬, le prix de la place passe alors Ã  3â‚¬. 

Ã€ partir de combien de place faut-il prendre un abonnement ?

2 reprÃ©sentations possibles :

<img class="fragment" src="/OutilsTraitementCorpus/slides/img/Reprequation.png">

-vertical-

### Une reprÃ©sentation : choix de lâ€™Ã©chelle

Comment voir le mieux les donnÃ©es ?

On va utiliser diffÃ©rentes variables de reprÃ©sentation :

Position, taille, forme, saturation, couleur, etc.

-vertical-

Pour mieux comprendre on va mesurer les caractÃ©ristiques visuelles des variables de reprÃ©sentation :

*SÃ©lectivitÃ©* : Ã  quel point il est facile de diffÃ©rencier/dâ€™isoler des groupes diffÃ©rents ?
*AssociativitÃ©* : Ã  quel point il est facile de crÃ©er des groupes ?
*OrdonnabilitÃ©* : Ã  quel point arrive t-on Ã  percevoir un ordre dans les donnÃ©es ?
*QuantifiabilitÃ©* : Ã  quel point arrive t-on Ã  obtenir des valeurs numÃ©riques Ã  partir de notre reprÃ©sentation ?
*VariabilitÃ©* : Ã  quel point arrive t-on crÃ©er des variantes et toujours rÃ©ussir Ã  percevoir les changements dans notre reprÃ©sentation ?

-vertical-

<img src="/OutilsTraitementCorpus/slides/img/position_slide.png">

-vertical-

<img src="/OutilsTraitementCorpus/slides/img/taille_slide.png">


-vertical-

<img src="/OutilsTraitementCorpus/slides/img/forme_slide.png">

-vertical-

### Quelle reprÃ©sentation donne le plus d'information et pourquoi ?

<div class="r-stretch">
<img src="https://www.researchgate.net/publication/284173352/figure/fig1/AS:298122837282824@1448089431764/Research-and-development-budgets-in-2011-by-country-Size-of-circles-indicate-the.png">
<img src="https://www.google.com/url?sa=i&url=https%3A%2F%2Fsciencebusiness.net%2Fnews-byte%2Fgovernment-rd-expenditure-fell-2021-after-huge-rise-pandemic-related-spending-research&psig=AOvVaw2-Y7Kx7tq8Nc33yVcJBx8R&ust=1714381542773000&source=images&cd=vfe&opi=89978449&ved=0CBIQjRxqGAoTCMCXiorH5IUDFQAAAAAdAAAAABCoAQ">
</div>

-vertical-

Des bibliothÃ¨ques spÃ©cifiques existent pour la reprÃ©sentation des donnÃ©es dont les plus connues sont :

- Matplotlib
- Seaborn

-vertical-

Un notebook Matplot/seaborn

-vertical-

Utiliser pandas pour visualiser les donnÃ©es

-horizontal-

â“ Des questions â“

ğŸ’¡ Des idÃ©es ğŸ’¡

-vertical-

## Le point bonne pratique

**Commenter son code &rarr; les [docstrings](https://peps.python.org/pep-0257/#what-is-a-docstring)**

> "Code is read much more often than it is written." Guido

-vertical-

1. Les docstrings de module
Au dÃ©but un fichier `.py`, on explique Ã  quoi il sert et qu'est ce qu'il contient
```
"""Spreadsheet Column Printer

This script allows the user to print to the console all columns in the
spreadsheet. It is assumed that the first row of the spreadsheet is the
location of the columns.

This tool accepts comma separated value files (.csv) as well as excel
(.xls, .xlsx) files.

This script requires that `pandas` be installed within the Python
environment you are running this script in.

This file can also be imported as a module and contains the following
functions:

    * get_spreadsheet_cols - returns the column headers of the file
    * main - the main function of the script
"""
```

-vertical-

2. Les docstrings de fonction
```
"""Gets and prints the spreadsheet's header columns

Parameters
----------
file_loc : str
    The file location of the spreadsheet
print_cols : bool, optional
    A flag used to print the columns to the console (default is
    False)

Returns
-------
list
    a list of strings used that are the header columns
"""
```

-vertical-

3. Les docstrings de Classe
```
"""
A class used to represent an Animal

Attributes
----------
says_str : str
    a formatted string to print out what the animal says
...
num_legs : int
    the number of legs the animal has (default 4)

Methods
-------
says(sound=None)
    Prints the animals name and what sound it makes
"""
```

-horizontal-

## TP 1 - Se connecter en ssh Ã  un serveur distant

### PermiÃ¨re partie mettre en place un "faux" serveur grÃ¢ce Ã  docker

1. Installer [docker](https://docs.docker.com/desktop/install/linux-install/) sur votre machine

-vertical-

1. Choix du systÃ¨me : Alpine ou Ubuntu

2. Installer openssh pour pouvoir se connecter au docker

3. Installer python sqlite3 bash py3-pip

-vertical-

```
FROM alpine:latest

RUN apk update && apk add bash
RUN apk add --update --no-cache openssh\
 sqlite\
 python3\
 py3-pip
```

-vertical-

RUN adduser -h /home/user -s /bin/sh -D user

-vertical-

## Les diffÃ©rents types de connection ssh

1. configuration par mot de passe

2. configuration par clÃ©

-vertical-

```
RUN echo "PasswordAuthentication yes" >> /etc/ssh/sshd_config
RUN echo -n "user:defaultpassword" | chpasswd
ENTRYPOINT ["/entrypoint.sh"]
```

-vertical-

1. exposer son conteneur sur un port

```
EXPOSE 22
COPY entrypoint.sh /
```

-vertical-

<h3 class="r-fit-text">Rappel sur la diffÃ©rence entre docker et machine virtuelle</h3>

<img src="https://www.sdxcentral.com/wp-content/uploads/2019/05/ContainersvsVMs_Image.jpg">

-vertical-

<h3 class="r-fit-text">Construire son docker</h3>

1. build le docker avec la commande 
```
sudo docker build -t alpine-sshd .
```

-vertical-

When a container runs, it uses the various layers from an image for its filesystem. Each container also gets its own "scratch space" to create/update/remove files. Any changes won't be seen in another container, even if they're using the same image.

-vertical-

2. crÃ©er un volume persitant 
```
sudo docker volume create mock-db
```

-vertical-

3. run le docker en montant le volume persitant

```
sudo docker run -d -p 127.0.0.1:22:22 --mount type=volume,src=mock-db,target=/ alpine-sshd:latest
```

-vertical-
6. se connecter en ssh sur le port 22

```
ssh user@127.0.0.1
```

-vertical-

<h3 class="r-fit-text">CrÃ©er sa base de donnÃ©es</h3>

On peut directement insÃ©rer nos dataframe `pandas` comme des tables sql grÃ¢ce Ã  la mÃ©thode de conversion `to_sql`

```
import sqlite3
con = sqlite3.connect("tutorial.db")
dataset.to_sql(con)
``Ì€ 

-horizontal-

### TP 2 - Trouver les statistiques adaptÃ©es Ã  son corpus

Ã€ partir du corpus de rÃ©fÃ©rence que vous avez choisi

- Trouvez les statistiques qui ont Ã©tÃ© effectuÃ©es pour prouver la qualitÃ© du corpus
- Les implÃ©menter et les calculer pour votre corpus
- Est-ce que le calcul est couteux ?
    - si oui, stocker les rÃ©sultats dans votre structure de donnÃ©es
    - si non, faire une mÃ©thode pour pouvoir facilement appliquer le calcul sur vos donnÃ©es.

-horizontal-

### TP 3 - Visualiser les statistiques de corpus

1. Visualiser votre corpus Ã  partir de statistiques de textes

    a. longueur des textes

    b. mots frÃ©quents (zipf)

    c. les statistiques adaptÃ©es Ã  votre tÃ¢che