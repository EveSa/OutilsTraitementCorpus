---
layout: presentation
title: Cours4
---
# Outils de Traitement de Corpus
cours 3
-vertical-

# Rappel du cours pr√©c√©dent

<h2 class="r-fit-text">üì¶Stocker des donn√©esüì¶</h2>
<h2 class="r-fit-text">üîÑCharger les donn√©es dans pythonüîÑ</h2>

-vertical-

# Cours 4

<h2 class="r-fit-text">üîÑStructurer les donn√©es - part 2üîÑ</h2>
<h2 class="r-fit-text">üé≤Statistiques de corpusüé≤</h2>
<h2 class="r-fit-text">üëìVisualiser les donn√©esüëì</h2>

-horizontal-

<h2 class="r-fit-text">üîÑStructurer les donn√©es - part 2üîÑ</h2>

On a pu charger nos donn√©es dans python.

Mais on a parl√© de bases de donn√©es.

-vertical-

### Petit rappel sur les BdD


Les bases de donn√©es permettent de stocker de larges quantit√©s de donn√©es de fa√ßon optimis√©. Elles sont constitu√©es de tables qui sont reli√©es entre elles par des cl√©s.

<img src="https://i.stack.imgur.com/dSnpA.png">

-vertical-

### Petit rappel sur les BdD

Chaque √©l√©ment d'une table doit √™tre identifiable de fa√ßon unique : les *cl√©s primaires*

Chaque √©l√©ment d'une table peut √™tre reli√© √† des √©l√©ments d'autres tables par leurs identifants unique : les *cl√©s √©trang√®res*

En indexant les donn√©es, on peut encore am√©liorer cette performance pour le stockage et la recherche.

-vertical-

### Petit rappel sur les BdD

Elles sont administr√©es par des actions *axiomatiques* qui sont partag√© par tous les syst√®mes de bases de donn√©es.

- La *d√©finition*
```
CREATE TABLE nom_de_la_table
(
    id INT PRIMARY KEY NOT NULL,
    colonne1 VARCHAR(500)
);
```

-vertical-

### Petit rappel sur les BdD

- Les op√©ration de *modification*
```
INSERT INTO nom_de_la_table
VALUES
(1, "1 valeur de la table"),
(2, "2 valeur de la table");
```

-vertical-

### Petit rappel sur les BdD

- Les *recherches*

```
SELECT * FROM nom_de_la_table
```

-vertical-

### Petit rappel sur les BdD

- Le *partage/administration*

&rarr; g√©rer les utilisateurs, les donn√©es, etc...

-vertical-

Le plus important reste le language de requ√™te :

Il faut savoir naviguer entre les diff√©rentes tables en utilisant les identifiants des objets qu'elles contiennent

-vertical-

<aside class="notes">
schema creation

-> il ya un certain nombre d'actions qui sont limit√©es

SQL

cl√© primaire - cl√© etrang√®re



les bases de donn√©es (DB) les plus utilis√©es sont les bases de donn√©es relationnelles (cf. Cours de SQL).
Elles utilisent un Relational Database Management System (RDBMS) pour stocker les donn√©es et peuvent
√™tre requ√™t√©es gr√¢ce √† SQL.


Les diff√©rents RDBMS sont impl√©ment√©s pour diff√©rents usages:

```
PostGre vs. SQLite
```

</aside>

Les DB sont souvent stock√©es sur des serveurs distants auquels il faut acc√©der avec un protocole de communication
s√©curis√© (type ssh [secure shell protocol])

&rarr; On peut s'entra√Æner √† g√©rer ce genre de choses gr√¢ce √† des machines virtuelles ou des dockers !
&rarr; On va faire √ßa dans la premi√®re partie TP d'aujourd'hui

-horizontal-

<h2 class="r-fit-text">üé≤Statistiques de corpusüé≤</h2>

Lorsqu'on collecte de grandes quantit√©s de donn√©es, il peut √™tre difficile d'√©valuer leur qualit√© en un coup d'oeil.

On va donc passer par des repr√©sentations de leurs caract√©ristiques pour estimer leur qualit√©.

-vertical-

Chaque t√¢che dispose de statistiques pour √©vualer la qualit√© des donn√©es r√©cup√©r√©es.

-vertical-

Les caract√©ristiques que l'on va observer peuvent √™tre :

- qualitatives
    - les termes contenus dans nos textes
- quantitatives
    - la quantit√© de donn√©es contenue dans notre corpus

-vertical-

Avec ces observations, on va √©galement pouvoir observer si on a des items qui ne correspondent pas √† ce que l'on voulait r√©cup√©rer

>*par exemple :*
Lorsqu'on r√©cup√®re des articles de presse, certains sont libres de droits et d'autres sont tronqu√©s apr√®s quelques lignes d'informations
&rarr; visualiser la taille des textes et des r√©sum√©s va nous permettre d'√©liminer les √©l√®ments non pertinents.

-vertical-

### Quelques exemples de caract√©ristiques √† exploiter :

**Pour le r√©sum√© automatique**

- La taille des textes
- la taille des r√©sum√©s
- le ratio de compression (taille des r√©sum√©s/taille des textes)

-vertical-

### Quelques exemples de caract√©ristiques √† exploiter :

**Pour la transcription**

- la longueur des audio
- la taille des transcriptions
- le ratio de compression des transcriptions/audio

-vertical-

### Quelques exemples de caract√©ristiques √† exploiter :

**Pour la traduction**

- Le ratio de type entre le texte source et cible
- Le ratio de longueur

-vertical-

### Quelques exemples de caract√©ristiques √† exploiter :

Ces caract√©ristiques sont pr√©sent√©es dans les papiers qui pr√©sentent les corpus pour une t√¢che donn√©es

&rarr; Quelles sont les statistiques pour votre t√¢che ?

-horizontal-

<h2 class="r-fit-text">üëìVisualiser les donn√©esüëì</h2>


-vertical-

La visualisation permet de :

- *mieux appr√©hender* les *donn√©es et leur structure*
- pouvoir faire des *comparaisons* avec d‚Äôautres donn√©es
- vulgariser/communiquer avec des non-experts
- r√©soudre un probl√®me
- pouvoir acqu√©rir de nouvelles connaissances

-vertical-

## Le Quartet d'Anscombe

<div class="r-stack">
    <div>
        <img src="/OutilsTraitementCorpus/slides/img/tableauQuartetAnscombe.png">
        <img src="/OutilsTraitementCorpus/slides/img/tableauQuartetAnscombe_tableauvaleur.png">
    </div>
    <div>
        <img class="fragment" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Anscombe.svg/langfr-1920px-Anscombe.svg.png">
    </div>
</div>

-vertical-

La perception humaine est limit√©e.

<div class="r-stretch">
        <img src="https://www.popsci.com/uploads/2019/03/18/HJRGWPU4SINA2B6WK5PJ2UBF4M.jpg?auto=webp&optimize=high&width=1440">
        <img class="fragment" src="https://www.popsci.com/uploads/2019/03/18/6QRQCXL4ZJSFJG4NXTX7RBODOU.jpg?auto=webp&optimize=high&width=800">
</div>

-vertical-

On est bon pour reconnaitre les formes et les ordres de grandeurs

<img class ="r-stretch" src="https://static.boredpanda.com/blog/wp-content/uploads/2020/09/1291509085855260672-png__700.jpg">

-vertical-

Pourquoi faire de la visualisation ?

- Faire de la visualisation =

Choisir une repr√©sentation pour r√©soudre un probl√®me

- Une repr√©sentation c‚Äôest :
- Des m√©triques (qu‚Äôest-ce que l‚Äôon veut repr√©senter ?)
- Une √©chelle (comment voir le mieux les donn√©es ?)
- Une projection (comment choisir les variables de repr√©sentation ?)

-vertical-

Un cin√©ma vend des places pour 5‚Ç¨. Il propose aussi un abonnement √† 50‚Ç¨, le prix de la place passe alors √† 3‚Ç¨. 

√Ä partir de combien de place faut-il prendre un abonnement ?

2 repr√©sentations possibles :

<img class="fragment" src="/OutilsTraitementCorpus/slides/img/Reprequation.png">

-vertical-

### Une repr√©sentation : choix de l‚Äô√©chelle

Comment voir le mieux les donn√©es ?

On va utiliser diff√©rentes variables de repr√©sentation :

Position, taille, forme, saturation, couleur, etc.

-vertical-

Pour mieux comprendre on va mesurer les caract√©ristiques visuelles des variables de repr√©sentation :

*S√©lectivit√©* : √† quel point il est facile de diff√©rencier/d‚Äôisoler des groupes diff√©rents ?

*Associativit√©* : √† quel point il est facile de cr√©er des groupes ?

*Ordonnabilit√©* : √† quel point arrive t-on √† percevoir un ordre dans les donn√©es ?

*Quantifiabilit√©* : √† quel point arrive t-on √† obtenir des valeurs num√©riques √† partir de notre repr√©sentation ?

*Variabilit√©* : √† quel point arrive t-on cr√©er des variantes et toujours r√©ussir √† percevoir les changements dans notre repr√©sentation ?

-vertical-

<img src="/OutilsTraitementCorpus/slides/img/position_slide.png">

-vertical-

<img src="/OutilsTraitementCorpus/slides/img/taille_slide.png">


-vertical-

<img src="/OutilsTraitementCorpus/slides/img/forme_slide.png">

-vertical-

### Quelle repr√©sentation donne le plus d'information et pourquoi ?

<div class="r-stretch">
<img src="https://www.researchgate.net/publication/284173352/figure/fig1/AS:298122837282824@1448089431764/Research-and-development-budgets-in-2011-by-country-Size-of-circles-indicate-the.png">
<img src="https://sciencebusiness.net/sites/default/files/inline-images/nb0704_1050.jpg">
</div>

-vertical-

Des biblioth√®ques sp√©cifiques existent pour la repr√©sentation des donn√©es dont les plus connues sont :

- Matplotlib
- Seaborn

-vertical-

Un notebook Matplot/seaborn

-vertical-

Utiliser pandas pour visualiser les donn√©es

-horizontal-

‚ùì Des questions ‚ùì

üí° Des id√©es üí°

-vertical-

## Le point bonne pratique

**Commenter son code &rarr; les [docstrings](https://peps.python.org/pep-0257/#what-is-a-docstring)**

> "Code is read much more often than it is written." Guido

-vertical-

1. Les docstrings de module
Au d√©but un fichier `.py`, on explique √† quoi il sert et qu'est ce qu'il contient
```
"""Spreadsheet Column Printer

This script allows the user to print to the console all columns in the
spreadsheet. It is assumed that the first row of the spreadsheet is the
location of the columns.

This tool accepts comma separated value files (.csv) as well as excel
(.xls, .xlsx) files.

This script requires that `pandas` be installed within the Python
environment you are running this script in.

This file can also be imported as a module and contains the following
functions:

    * get_spreadsheet_cols - returns the column headers of the file
    * main - the main function of the script
"""
```

-vertical-

2. Les docstrings de fonction
```
"""Gets and prints the spreadsheet's header columns

Parameters
----------
file_loc : str
    The file location of the spreadsheet
print_cols : bool, optional
    A flag used to print the columns to the console (default is
    False)

Returns
-------
list
    a list of strings used that are the header columns
"""
```

-vertical-

3. Les docstrings de Classe
```
"""
A class used to represent an Animal

Attributes
----------
says_str : str
    a formatted string to print out what the animal says
...
num_legs : int
    the number of legs the animal has (default 4)

Methods
-------
says(sound=None)
    Prints the animals name and what sound it makes
"""
```

-horizontal-

## TP 1 - Se connecter en ssh √† un serveur distant

### Permi√®re partie mettre en place un "faux" serveur gr√¢ce √† docker

1. Installer [docker](https://docs.docker.com/desktop/install/linux-install/) sur votre machine

-vertical-

1. Choix du syst√®me : Alpine ou Ubuntu

2. Installer openssh pour pouvoir se connecter au docker

3. Installer python sqlite3 bash py3-pip

-vertical-

```
FROM alpine:latest

RUN apk update && apk add bash
RUN apk add --update --no-cache openssh\
 sqlite\
 python3\
 py3-pip
```

-vertical-

RUN adduser -h /home/user -s /bin/sh -D user

-vertical-

## Les diff√©rents types de connection ssh

1. configuration par mot de passe

2. configuration par cl√©

-vertical-

```
RUN echo "PasswordAuthentication yes" >> /etc/ssh/sshd_config
RUN echo -n "user:defaultpassword" | chpasswd
ENTRYPOINT ["/entrypoint.sh"]
```

-vertical-

1. exposer son conteneur sur un port

```
EXPOSE 22
COPY entrypoint.sh /
```

-vertical-

<h3 class="r-fit-text">Rappel sur la diff√©rence entre docker et machine virtuelle</h3>

<img src="https://www.sdxcentral.com/wp-content/uploads/2019/05/ContainersvsVMs_Image.jpg">

-vertical-

<h3 class="r-fit-text">Construire son docker</h3>

1. build le docker avec la commande 
```
sudo docker build -t alpine-sshd .
```

-vertical-

When a container runs, it uses the various layers from an image for its filesystem. Each container also gets its own "scratch space" to create/update/remove files. Any changes won't be seen in another container, even if they're using the same image.

-vertical-

2. cr√©er un volume persitant 
```
sudo docker volume create mock-db
```

-vertical-

3. run le docker en montant le volume persitant

```
sudo docker run -d -p 127.0.0.1:22:22 --mount type=volume,src=mock-db,target=/ alpine-sshd:latest
```

-vertical-
6. se connecter en ssh sur le port 22

```
ssh user@127.0.0.1
```

-vertical-

<h3 class="r-fit-text">Cr√©er sa base de donn√©es</h3>

On peut directement ins√©rer nos dataframe `pandas` comme des tables sql gr√¢ce √† la m√©thode de conversion `to_sql`

```
import sqlite3
con = sqlite3.connect("tutorial.db")
dataset.to_sql(con)
``ÃÄ 

-horizontal-

### TP 2 - Trouver les statistiques adapt√©es √† son corpus

√Ä partir du corpus de r√©f√©rence que vous avez choisi

- Trouvez les statistiques qui ont √©t√© effectu√©es pour prouver la qualit√© du corpus
- Les impl√©menter et les calculer pour votre corpus
- Est-ce que le calcul est couteux ?
    - si oui, stocker les r√©sultats dans votre structure de donn√©es
    - si non, faire une m√©thode pour pouvoir facilement appliquer le calcul sur vos donn√©es.

-horizontal-

### TP 3 - Visualiser les statistiques de corpus

1. Visualiser votre corpus √† partir de statistiques de textes

    a. longueur des textes

    b. mots fr√©quents (zipf)

    c. les statistiques adapt√©es √† votre t√¢che