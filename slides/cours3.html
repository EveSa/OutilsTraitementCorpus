---
layout: presentation
title: Cours3
---
# Outils de Traitement de Corpus
cours 3
-vertical-
# Rappel du cours précédent

<h2 class="r-fit-text">🛍️Récupérer de nouvelles données🛍️</h2>
<h2 class="r-fit-text">⛽Rendre les données exploitable⛽</h2>
<h2 class="r-fit-text">🔧Les Outils pour explorer les données🔧</h2>

-vertical-
# Cours 3

<h2 class="r-fit-text">📦Stocker des données📦</h2>
<h2 class="r-fit-text">🔄Charger les données dans python🔄</h2>
<h2 class="r-fit-text">🔧Les Outils pour explorer les données🔧</h2>

-horizontal-

<h2 class="r-fit-text">📦Stocker des données📦</h2>

Maintenant qu'on a récupéré 3M de données sur le web, il va falloir les stocker efficacement pour qu'elles soient accessible simplement.

-vertical-

Même avant le *Machine Learning* (ML) et les *Transformers* 🤖, le stockage des données était un paramètre important.

>*Par exemple :*
>
>Dans un cadre professionnel, une entreprise veut garder en mémoire les informations de ses clients

-vertical-

Ce genre de données sont des **données structurées** (cf. votre cours de documents structurés): 

On les a selectionnées pour qu'elles rentrent dans des cases spécifiques

> *Pour SQuAD :*
> | id | title | context | question | answers |
> |--|--|--|--|--|

-vertical-

Des formats de fichiers spécifiquent existent pour conserver les données structurées :

-vertical-

**Des données au format tabulaire**

- CSV
- Excel
- Parquet

-vertical-

**Des données arrangées hierarchiquement**
- XML
- JSON

-vertical-

**D'autres représentations**
- Les bases de données
- YAML
- RDF

-vertical-

### Pourquoi des formats spécifiques ?

Suivre des formats permet l'inter-opérabilité des systèmes qui utilisent ces données.
Avec le WWW, se mettre d'accord sur les formalismes est devenu important.

-vertical-

## Les format tabulaire📊

### Comma Separated Values (CSV)

<div class="r-stack">

<div>
Le nom est explicite...

<pre><code data-trim data-noescape>
id, title, context, question
573.., University_of_Notre_Dame, "Architecturally, the school has ...", To whom did the Virgin..., { "text": [ "Saint Bernadette Soubirous" ],..
...
</code></pre>

<p class="fragment">❗ Il y a un problème dans ce fichier, est ce que vous voyez lequel ?</p>
</div>
<img class="fragment" src="/slides/img/socrative-qr-code.PNG">

</div>
<p class="fragment"> ➡Notre 3e champ est un texte qui contient une virgule !</p>

-vertical-

## Les format tabulaire📊

Pour éviter ce genre de problème : CSV permet l'utilisation d'autres delimiteurs

➡ Il suffit de préciser quel délimiteur on utilise quand on traite les données.

-vertical-

## Les format tabulaire📊

### Excel

Couplé avec un logiciel d'exploitation des données, le format `.xsl` reste très utilisé.

❗ Excel (comme la plupart des formats de données de même type) est compatible avec csv

-vertical-

## Les format tabulaire📊

### Parquet

**Apache Parquet** est efficace pour stocker des grandes quantités de données.
Je vous en parle parceque c'est comme ça que sont stockées les données de SQuAD.

-vertical-

<h2 class="r-fit-text">Les formats Hierarchiques🌳</h2>

### XML (Extensible Markup Language)

Premier format de données pour échanger les info sur internet

➡Donne naissance au HTML

Je en vous refait pas un cours là dessus.

-vertical-

<h2 class="r-fit-text">Les formats Hierarchiques🌳</h2>

### JSON (JavaScript Object Notation)

<div class="r-stack">
<div>
Popularisé par les amateurs de JavaScript après l'arrivée de XML.

Sensiblement simimaire au XML à l'exeception de :
- sa rapidité
- son utilisation des listes

```
{
    "id": 573..,
    "title": "University_of_Notre_Dame",
    "context": "Architecturally, the school has ...",
    "question": "To whom did the Virgin...",
    "answers": { "text": [ "Saint Bernadette Soubirous" ],..}
}
```

<p class="fragment">❗ On peut voir que JSON est un format très utilisé dans la structure de données ci-dessus</p>
</div>

<img class="fragment" src="/img/socrative-qr-code.PNG">
</div>

-vertical-

## Les autres formats

### Les bases de données et SQL (Structured Query Language)

Quand les quantités de données deviennent importantes et que leur gestion est
critique pour le domaine de l'entreprise on utilise des **bases de données**.

-vertical-

les bases de données (DB) les plus utilisées sont les bases de données relationnelles (cf. Cours de SQL).
Elles utilisent un Relational Database Management System (RDBMS) pour stocker les données et peuvent
être requêtées grâce à SQL.

-vertical-

Les DB sont souvent stockées sur des serveurs distants auquels il faut accéder avec un protocole de communication
sécurisé (type ssh [secure shell protocol])

@Thmas si tu veux aider

Ici préparer le TP de requête sur DB distante

-vertical-

## Les autres formats

### RDF

Developpé pour les besoins du web semantique, le format RDF est à la base des **ontologies** (cf. le cours d'ontologie de l'année prochaine).
Les ontologies sont une formalisation d'une partie de la connaissance.
Le format RDF utilise une représentation

> (sujet, predicat, objet)

pour donner les liens entre les différents éléments contenus dans les données.

-vertical-

## Les autres formats

### RDF

*un exemple*

```
(University_of_Notre_Dame, titre, "Architecturally, the school has...")
```
Des languages spécifiques existent pour ce format (JSON-LD, OWL) mais vous les verrez l'année prochaine.

-horinzontal-

<h2 class="r-fit-text">🔄Charger les données dans python🔄</h2>

-vertical-

Maintenant que :
1. On a récupéré les données qui nous intéréssent sur le web
2. On les a stockés dans un format structuré approprié

➡On veut pouvoir accéder à ces données dans python pour les explorer

-vertical-

# Ouvrir des fichiers

```
with open('file_path.txt', 'r') as file:
    data = file.readlines()
```

-vertical-

si on a du json, on peut utiliser la librairie Python `json`

```
import python

with open('file_path.txt', 'r') as file:
    data = json.load(file)
```

-vertical-

Mais si on a rempli un fichier de différents objets json, ça ne va pas marcher :

c'est ce qu'on appelle un fichier jsonlines. On est obligé l'itérer sur les lignes


-horizontal-

❓ Des questions ❓

💡 Des idées 💡

-vertical-

## Le point bonne pratique

**Commenter son code &rarr; les [docstrings](https://peps.python.org/pep-0257/#what-is-a-docstring)**

> "Code is read much more often than it is written." Guido

-vertical-

1. Les docstrings de module
Au début un fichier `.py`, on explique à quoi il sert et qu'est ce qu'il contient
```
"""Spreadsheet Column Printer

This script allows the user to print to the console all columns in the
spreadsheet. It is assumed that the first row of the spreadsheet is the
location of the columns.

This tool accepts comma separated value files (.csv) as well as excel
(.xls, .xlsx) files.

This script requires that `pandas` be installed within the Python
environment you are running this script in.

This file can also be imported as a module and contains the following
functions:

    * get_spreadsheet_cols - returns the column headers of the file
    * main - the main function of the script
"""
```

-vertical-

2. Les docstrings de fonction
```
"""Gets and prints the spreadsheet's header columns

Parameters
----------
file_loc : str
    The file location of the spreadsheet
print_cols : bool, optional
    A flag used to print the columns to the console (default is
    False)

Returns
-------
list
    a list of strings used that are the header columns
"""
```

-vertical-

3. Les docstrings de Classe
```
"""
A class used to represent an Animal

Attributes
----------
says_str : str
    a formatted string to print out what the animal says
...
num_legs : int
    the number of legs the animal has (default 4)

Methods
-------
says(sound=None)
    Prints the animals name and what sound it makes
"""
```

-vertical-

1. Aller requêter notre DB
---
1. Ouvrir son corpus avec pandas
2. Convertir son corpus au format Dataset
3. Réaliser des métriques sur le corpus
    a. taille des textes
        - en nombre de mots
        - en nombre de phrases
        - en taille de fichiers