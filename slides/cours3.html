---
layout: presentation
title: Cours3
---
# Outils de Traitement de Corpus
cours 3
-vertical-
# Rappel du cours prÃ©cÃ©dent

<h2 class="r-fit-text">ğŸ›ï¸RÃ©cupÃ©rer de nouvelles donnÃ©esğŸ›ï¸</h2>
<h2 class="r-fit-text">â›½Rendre les donnÃ©es exploitableâ›½</h2>
<h2 class="r-fit-text">ğŸ”§Les Outils pour explorer les donnÃ©esğŸ”§</h2>

-vertical-
# Cours 3

<h2 class="r-fit-text">ğŸ“¦Stocker des donnÃ©esğŸ“¦</h2>
<h2 class="r-fit-text">ğŸ”„Charger les donnÃ©es dans pythonğŸ”„</h2>
<h2 class="r-fit-text">ğŸ”§Les Outils pour explorer les donnÃ©esğŸ”§</h2>

-horizontal-

<h2 class="r-fit-text">ğŸ“¦Stocker des donnÃ©esğŸ“¦</h2>

Maintenant qu'on a rÃ©cupÃ©rÃ© 3M de donnÃ©es sur le web, il va falloir les stocker efficacement pour qu'elles soient accessible simplement.

-vertical-

MÃªme avant le *Machine Learning* (ML) et les *Transformers* ğŸ¤–, le stockage des donnÃ©es Ã©tait un paramÃ¨tre important.

>*Par exemple :*
>
>Dans un cadre professionnel, une entreprise veut garder en mÃ©moire les informations de ses clients

-vertical-

Ce genre de donnÃ©es sont des **donnÃ©es structurÃ©es** (cf. votre cours de documents structurÃ©s): 

On les a selectionnÃ©es pour qu'elles rentrent dans des cases spÃ©cifiques

> *Pour SQuAD :*
> | id | title | context | question | answers |
> |--|--|--|--|--|

-vertical-

Des formats de fichiers spÃ©cifiquent existent pour conserver les donnÃ©es structurÃ©es :

-vertical-

**Des donnÃ©es au format tabulaire**

- CSV
- Excel
- Parquet

-vertical-

**Des donnÃ©es arrangÃ©es hierarchiquement**
- XML
- JSON

-vertical-

**D'autres reprÃ©sentations**
- Les bases de donnÃ©es
- YAML
- RDF

-vertical-

### Pourquoi des formats spÃ©cifiques ?

Suivre des formats permet l'inter-opÃ©rabilitÃ© des systÃ¨mes qui utilisent ces donnÃ©es.
Avec le WWW, se mettre d'accord sur les formalismes est devenu important.

-vertical-

## Les format tabulaireğŸ“Š

### Comma Separated Values (CSV)

<div class="r-stack">

<div>
Le nom est explicite...

<pre><code data-trim data-noescape>
id, title, context, question
573.., University_of_Notre_Dame, "Architecturally, the school has ...", To whom did the Virgin..., { "text": [ "Saint Bernadette Soubirous" ],..
...
</code></pre>

<p class="fragment">â— Il y a un problÃ¨me dans ce fichier, est ce que vous voyez lequel ?</p>
</div>
<img class="fragment" src="/slides/img/socrative-qr-code.PNG">

</div>
<p class="fragment"> â¡Notre 3e champ est un texte qui contient une virgule !</p>

-vertical-

## Les format tabulaireğŸ“Š

Pour Ã©viter ce genre de problÃ¨me : CSV permet l'utilisation d'autres delimiteurs

â¡ Il suffit de prÃ©ciser quel dÃ©limiteur on utilise quand on traite les donnÃ©es.

-vertical-

## Les format tabulaireğŸ“Š

### Excel

CouplÃ© avec un logiciel d'exploitation des donnÃ©es, le format `.xsl` reste trÃ¨s utilisÃ©.

â— Excel (comme la plupart des formats de donnÃ©es de mÃªme type) est compatible avec csv

-vertical-

## Les format tabulaireğŸ“Š

### Parquet

**Apache Parquet** est efficace pour stocker des grandes quantitÃ©s de donnÃ©es.
Je vous en parle parceque c'est comme Ã§a que sont stockÃ©es les donnÃ©es de SQuAD.

-vertical-

<h2 class="r-fit-text">Les formats HierarchiquesğŸŒ³</h2>

### XML (Extensible Markup Language)

Premier format de donnÃ©es pour Ã©changer les info sur internet

â¡Donne naissance au HTML

Je en vous refait pas un cours lÃ  dessus.

-vertical-

<h2 class="r-fit-text">Les formats HierarchiquesğŸŒ³</h2>

### JSON (JavaScript Object Notation)

<div class="r-stack">
<div>
PopularisÃ© par les amateurs de JavaScript aprÃ¨s l'arrivÃ©e de XML.

Sensiblement simimaire au XML Ã  l'exeception de :
- sa rapiditÃ©
- son utilisation des listes

```
{
    "id": 573..,
    "title": "University_of_Notre_Dame",
    "context": "Architecturally, the school has ...",
    "question": "To whom did the Virgin...",
    "answers": { "text": [ "Saint Bernadette Soubirous" ],..}
}
```

<p class="fragment">â— On peut voir que JSON est un format trÃ¨s utilisÃ© dans la structure de donnÃ©es ci-dessus</p>
</div>

<img class="fragment" src="/img/socrative-qr-code.PNG">
</div>

-vertical-

## Les autres formats

### Les bases de donnÃ©es et SQL (Structured Query Language)

Quand les quantitÃ©s de donnÃ©es deviennent importantes et que leur gestion est
critique pour le domaine de l'entreprise on utilise des **bases de donnÃ©es**.

-vertical-

les bases de donnÃ©es (DB) les plus utilisÃ©es sont les bases de donnÃ©es relationnelles (cf. Cours de SQL).
Elles utilisent un Relational Database Management System (RDBMS) pour stocker les donnÃ©es et peuvent
Ãªtre requÃªtÃ©es grÃ¢ce Ã  SQL.

-vertical-

Les DB sont souvent stockÃ©es sur des serveurs distants auquels il faut accÃ©der avec un protocole de communication
sÃ©curisÃ© (type ssh [secure shell protocol])

@Thmas si tu veux aider

Ici prÃ©parer le TP de requÃªte sur DB distante

-vertical-

## Les autres formats

### RDF

DeveloppÃ© pour les besoins du web semantique, le format RDF est Ã  la base des **ontologies** (cf. le cours d'ontologie de l'annÃ©e prochaine).
Les ontologies sont une formalisation d'une partie de la connaissance.
Le format RDF utilise une reprÃ©sentation

> (sujet, predicat, objet)

pour donner les liens entre les diffÃ©rents Ã©lÃ©ments contenus dans les donnÃ©es.

-vertical-

## Les autres formats

### RDF

*un exemple*

```
(University_of_Notre_Dame, titre, "Architecturally, the school has...")
```
Des languages spÃ©cifiques existent pour ce format (JSON-LD, OWL) mais vous les verrez l'annÃ©e prochaine.

-horinzontal-

<h2 class="r-fit-text">ğŸ”„Charger les donnÃ©es dans pythonğŸ”„</h2>

-vertical-

Maintenant que :
1. On a rÃ©cupÃ©rÃ© les donnÃ©es qui nous intÃ©rÃ©ssent sur le web
2. On les a stockÃ©s dans un format structurÃ© appropriÃ©

â¡On veut pouvoir accÃ©der Ã  ces donnÃ©es dans python pour les explorer

-vertical-

# Ouvrir des fichiers

```
with open('file_path.txt', 'r') as file:
    data = file.readlines()
```

-vertical-

si on a du json, on peut utiliser la librairie Python `json`

```
import python

with open('file_path.txt', 'r') as file:
    data = json.load(file)
```

-vertical-

Mais si on a rempli un fichier de diffÃ©rents objets json, Ã§a ne va pas marcher :

c'est ce qu'on appelle un fichier jsonlines. On est obligÃ© l'itÃ©rer sur les lignes


-horizontal-

â“ Des questions â“

ğŸ’¡ Des idÃ©es ğŸ’¡

-vertical-

## Le point bonne pratique

**Commenter son code &rarr; les [docstrings](https://peps.python.org/pep-0257/#what-is-a-docstring)**

> "Code is read much more often than it is written." Guido

-vertical-

1. Les docstrings de module
Au dÃ©but un fichier `.py`, on explique Ã  quoi il sert et qu'est ce qu'il contient
```
"""Spreadsheet Column Printer

This script allows the user to print to the console all columns in the
spreadsheet. It is assumed that the first row of the spreadsheet is the
location of the columns.

This tool accepts comma separated value files (.csv) as well as excel
(.xls, .xlsx) files.

This script requires that `pandas` be installed within the Python
environment you are running this script in.

This file can also be imported as a module and contains the following
functions:

    * get_spreadsheet_cols - returns the column headers of the file
    * main - the main function of the script
"""
```

-vertical-

2. Les docstrings de fonction
```
"""Gets and prints the spreadsheet's header columns

Parameters
----------
file_loc : str
    The file location of the spreadsheet
print_cols : bool, optional
    A flag used to print the columns to the console (default is
    False)

Returns
-------
list
    a list of strings used that are the header columns
"""
```

-vertical-

3. Les docstrings de Classe
```
"""
A class used to represent an Animal

Attributes
----------
says_str : str
    a formatted string to print out what the animal says
...
num_legs : int
    the number of legs the animal has (default 4)

Methods
-------
says(sound=None)
    Prints the animals name and what sound it makes
"""
```

-vertical-

1. Aller requÃªter notre DB
---
1. Ouvrir son corpus avec pandas
2. Convertir son corpus au format Dataset
3. RÃ©aliser des mÃ©triques sur le corpus
    a. taille des textes
        - en nombre de mots
        - en nombre de phrases
        - en taille de fichiers